/*! lasertutor 07-07-2014 */
(function(){var a,b,c,d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},l=function(a,b){return function(){return a.apply(b,arguments)}},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=null!=h?h:this,j=function(a,b){return null==b&&(b=i),h[a]=b,window[a]=b},i={},j("ambigui",i),a=function(){function a(){var a,b,c,d;for(d=["ms","moz","o","webkit"],b=0,c=d.length;c>b;b++)a=d[b],null==window.requestAnimationFrame&&(window.requestAnimationFrame=window[a+"RequestAnimationFrame"]);null==window.requestAnimationFrame&&(this.animation=this.fallbackAnimation)}return a.prototype.valAndFormatArrays=function(a){var b,c,d,e,f,g,h,i,j;for(g="-+.eE0123456789".split(""),b=a.split(""),b.reverse(),c="",f="",h=[],d=[],e={};0!==b.length;){for(;i=b[b.length-1],k.call(g,i)>=0&&b.length>0;)f+=b.pop();for(;j=b[b.length-1],!(k.call(g,j)>=0)&&b.length>0;)c+=b.pop();!isNaN(Number(f))&&f.length>0?(e[h.length]=d.length,h.push(parseFloat(f)),d.push(null),f=""):f.length>0&&(c=d.pop()+f+c,f=""),c.length>0&&(d.push(c),c="")}return[h,d,e]},a.prototype.makeFormatter=function(a,b){return function(c){var d,e,f,g,h,i,j;for(d=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)h=a[b],d.push(h);return d}(),e=i=0,j=c.length;j>i;e=++i)f=c[e],d[b[e]]=f;return g=function(a,b){return a+b},d.reduce(g,"")}},a.prototype.interpolation=function(a,b){var c,d,e,f;return a instanceof Array&&b instanceof Array?(d=function(){var c,d,g;for(g=[],e=c=0,d=b.length;d>c;e=++c)f=b[e],g.push(f-a[e]);return g}(),function(b){var c,f,g,h;for(h=[],e=f=0,g=a.length;g>f;e=++f)c=a[e],h.push(c+d[e]*b);return h}):(c=b-a,function(b){return a+c*b})},a.prototype.transition=function(a,b,c,d,e){var f;return f=this.interpolation(c,d),function(c){return a.setAttribute(b,e(f(c)))}},a.prototype.animation=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;return q=this.valAndFormatArrays(c),k=q[0],i=q[1],j=q[2],r=this.valAndFormatArrays(d),o=r[0],m=r[1],n=r[2],h=this.makeFormatter(i,j),p=this.transition(a,b,k,o,h),l=null,g=function(a){var b;return null==a?void window.requestAnimationFrame(g):(null==l&&(l=a),b=a-l,b>=e?(p(1),null!=f?f():void 0):(p(b/e),window.requestAnimationFrame(g)))}},a.prototype.fallbackAnimation=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;return q=this.valAndFormatArrays(c),k=q[0],i=q[1],j=q[2],r=this.valAndFormatArrays(d),o=r[0],m=r[1],n=r[2],h=this.makeFormatter(i,j),p=this.transition(a,b,k,o,h),l=null,g=function(){var a,b;return b=(new Date).getTime(),null==l&&(l=b),a=b-l,a>=e?(p(1),null!=f?f():void 0):(p(a/e),window.setTimeout(g,16))}},a}(),i.Animator=a,i.DOGWOOD={},f=function(){function a(a){this.toggleChildrenVisible=l(this.toggleChildrenVisible,this),this.makeContentGroup=l(this.makeContentGroup,this),this.animateVisible=l(this.animateVisible,this),this.visibleChildren=l(this.visibleChildren,this),this.hide=l(this.hide,this),this.hideChildren=l(this.hideChildren,this),this.showChildren=l(this.showChildren,this),this.animateCircle=l(this.animateCircle,this),this.makeCircle=l(this.makeCircle,this),this.animateContent=l(this.animateContent,this),this.animateLine=l(this.animateLine,this),this.makeLine=l(this.makeLine,this),this.getLinePoints=l(this.getLinePoints,this),this.totalWidth=l(this.totalWidth,this),this.totalHeight=l(this.totalHeight,this),this.flagpoleLength=l(this.flagpoleLength,this),this.moveChildren=l(this.moveChildren,this),this.updateChildren=l(this.updateChildren,this),this.contentWidth=l(this.contentWidth,this),this.contentHeight=l(this.contentHeight,this),this.move=l(this.move,this),this.updateOuterFrame=l(this.updateOuterFrame,this),this.updatePosition=l(this.updatePosition,this),this.requestUpdate=l(this.requestUpdate,this),this.newChild=l(this.newChild,this),this.toString=l(this.toString,this);var b,c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w;if(this.children=[],c=null!=(f=a.parent)?f:a,this.name=null!=(g=a.text)?g:"Root",this.autoAdjust=null!=(p=a.autoAdjust)?p:!0,this.indent=null!=(q=c.indent)?q:40,this.contentDX=null!=(r=c.contentDX)?r:15,this.circleRadius=null!=(s=c.circleRadius)?s:4,this.animateDuration=null!=(t=c.animateDuration)?t:400,this.isHidden=null!=(u=a.isHidden)?u:!1,this.scale=this.isHidden?"0 1":"1 1",this.emptyColor=null!=(v=c.emptyColor)?v:"white",this.treeColor=null!=(w=c.treeColor)?w:"slateblue",this.marginTop=null!=(h=c.marginTop)?h:20,this.marginBottom=null!=(i=c.marginBottom)?i:10,this.lineWidth=null!=(j=c.lineWidth)?j:2,this.outerFramePaddingBottom=null!=(k=c.outerFramePaddingBottom)?k:20,this.x=null!=(m=a.x)?m:5,this.y=null!=(n=a.y)?n:0,null!=a.parent?(this.parent=a.parent,this.el=a.el):(this.isRoot=!0,this.div=a.el,this.el=this.svgElement("svg"),this.div.appendChild(this.el)),this.contentY=this.y+this.marginTop,this.makeContentGroup(),this.makeContent(),null==this.parent&&this.updateOuterFrame(!0),this.makeLine(),this.isHidden&&null!=a.children&&(this.circleY=this.y+this.marginTop+this.contentHeight()+this.marginBottom,this.circleX=this.indent),null!=a.children)for(o=a.children,d=0,e=o.length;e>d;d++)b=o[d],b.isHidden=!0,this.newChild(b)}return a.animator=new i.Animator,a.namespaceElementCreator=function(a,b){return null==b&&(b=null),function(c,d){var e,f,g;null==d&&(d={}),f=document.createElementNS(a,c),null!=b&&null==d.version&&(d.version=b),d.xmlns=a;for(e in d)g=d[e],f.setAttribute(e,g);return f}},a.prototype.svgElement=a.namespaceElementCreator("http://www.w3.org/2000/svg","1.1"),a.prototype.htmlElement=a.namespaceElementCreator("http://www.w3.org/1999/xhtml"),a.prototype.toString=function(){var a,b,c,d,e,f,g,h,i,j;for(d="name: "+this.name+"\n isHidden: "+this.isHidden+" x: "+this.x+" y: "+this.y,d+=" contentDX: "+this.contentDX+" ",d+="contentX: "+this.contentX+" contentHeight: "+this.contentHeight(),d+=" textY: "+this.contentY+" linePoints: "+this.linePoints+" circleX: "+this.circleX,d+=" circleY "+this.circleY+" marginBottom "+this.marginBottom,d+=" marginTop: "+this.marginTop,d+=" scale: "+this.scale+" totalHeight: "+this.totalHeight(),d+="\n",i=this.children,e=0,g=i.length;g>e;e++)a=i[e],d+=a.toString();for(c="",j=d.split("\n"),f=0,h=j.length;h>f;f++)b=j[f],c+="   "+b+"\n";return c},a.prototype.newChild=function(a){var b,c,d,e,f;return null==a&&(a={}),null!=this.circle||this.isHidden||this.makeCircle(),f={transform:"translate("+this.indent+", 0)"},e=this.svgElement("g",f),d=a.isHidden?"0 1":"1 1",f={transform:"scale("+d+")"},c=this.svgElement("g",f),e.appendChild(c),this.el.appendChild(e),a.el=c,a.parent=this,null==a.text&&(a.text="new"),a.x=this.x+this.indent,a.y=a.isHidden?this.y:this.y+this.flagpoleLength(),b=new this.constructor(a),this.children.push(b)},a.prototype.requestUpdate=function(){return null!=this.parent?this.parent.requestUpdate():this.updatePosition()},a.prototype.updatePosition=function(a){return null==a&&(a=null),this.updateChildren(),null==this.parent&&this.autoAdjust&&this.updateOuterFrame(),this.moveChildren(),this.move()},a.prototype.updateOuterFrame=function(b){var c,d,e,f;return null==b&&(b=!1),d=this.div.offsetHeight,console.log(d),c=this.totalHeight()+this.contentHeight()+this.outerFramePaddingBottom,console.log(c),b?(this.div.style.height=c+"px",this.el.style.height=c+"px",this.div.style.width=this.totalWidth()+"px",this.el.style.width=this.totalWidth()+"px",void 0):(null==this.width&&(this.width=this.div.offsetWidth),e="width: "+this.width+"px; height: "+d+"px",f="width: "+this.totalWidth()+"px; height: "+c+"px",a.animator.animation(this.div,"style",e,f,this.animateDuration,null)(),a.animator.animation(this.el,"style",e,f,this.animateDuration,null)(),this.width=this.totalWidth())},a.prototype.move=function(){return this.animateLine(),this.animateContent(),this.animateCircle(),this.animateVisible()},a.prototype.contentHeight=function(){var a,b,c,d;for(d=this.contentGroup.childNodes,b=0,c=d.length;c>b;b++){if(a=d[b],null!=a.offsetHeight)return a.offsetHeight;if(null!=a.height)return a.height.baseVal.value}},a.prototype.contentWidth=function(){var a,b,c,d,e;for(a=[],e=this.contentGroup.childNodes,c=0,d=e.length;d>c;c++)b=e[c],null!=b.offsetWidth&&a.push(b.offsetWidth),null!=b.width&&a.push(b.width.baseVal.value);return Math.max.apply(Math,a)},a.prototype.updateChildren=function(){var a,b,c,d,e,f;for(b=this.y+this.marginTop+this.contentHeight()+this.marginBottom,e=this.children,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.y=a.isHidden?this.y:b,a.x=this.x+this.indent,f.push(b+=a.isHidden?0:a.totalHeight());return f},a.prototype.moveChildren=function(a){var b,c,d,e,f;for(null==a&&(a=null),0===this.children.length&&null!=a&&a(),e=this.children,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.updatePosition(a));return f},a.prototype.flagpoleLength=function(){var a,b,c,d,e;for(b=0,c=this.visibleChildren(),d=0,e=c.length;e>d;d++)a=c[d],b+=a===c[c.length-1]?a.marginTop+a.contentHeight()+a.marginBottom:a.totalHeight();return b},a.prototype.totalHeight=function(){var a,b,c,d,e;for(b=this.marginBottom+this.marginTop+this.contentHeight(),e=this.visibleChildren(),c=0,d=e.length;d>c;c++)a=e[c],b+=a.totalHeight();return b},a.prototype.totalWidth=function(){var a,b,c,d,e;for(b=[Math.max(this.contentWidth()+this.contentDX,2*this.indent)],e=this.children,c=0,d=e.length;d>c;c++)a=e[c],b.push(this.indent+a.totalWidth());return Math.max.apply(Math,b)},a.prototype.getLinePoints=function(){var a;return a=this.y+this.marginTop+this.contentHeight()+this.marginBottom,"0 "+a+" "+this.indent+" "+a+" "+this.indent+" "+(a+this.flagpoleLength())},a.prototype.makeLine=function(){return this.linePoints=this.getLinePoints(),this.line=this.svgElement("polyline",{fill:"none",points:this.linePoints,"stroke-width":""+this.lineWidth+"px",stroke:this.treeColor}),this.el.appendChild(this.line)},a.prototype.animateLine=function(b){var c;if(null==b&&(b=null),null==this.line){if(this.isHidden)return void(this.linePoints=this.getLinePoints());this.makeLine()}return c=this.getLinePoints(),a.animator.animation(this.line,"points",this.linePoints,c,this.animateDuration,b)(),this.linePoints=c},a.prototype.animateContent=function(b){var c;return null==b&&(b=null),c=this.y+this.marginTop,a.animator.animation(this.content,"y",""+this.contentY+"px",""+c+"px",this.animateDuration,b)(),this.contentY=c},a.prototype.makeCircle=function(){return this.circleX=this.indent,null==this.circleY&&(this.circleY=this.y+this.marginTop+this.contentHeight()+this.marginBottom),this.circle=this.svgElement("circle",{fill:this.treeColor,cx:this.indent,cy:this.circleY,r:this.circleRadius,"stroke-width":""+this.lineWidth+"px",stroke:this.treeColor}),this.circle.addEventListener("click",this.toggleChildrenVisible),this.el.appendChild(this.circle)},a.prototype.animateCircle=function(b){var c,d;if(null==b&&(b=null),null==this.circle){if(0===this.children.length||this.isHidden)return;this.makeCircle()}return d=this.y+this.marginTop+this.contentHeight()+this.marginBottom,a.animator.animation(this.circle,"cy",""+this.circleY+"px",""+d+"px",this.animateDuration,b)(),this.circleY=d,c=0===this.visibleChildren().length?this.treeColor:this.emptyColor,this.circle.setAttribute("fill",c)},a.prototype.showChildren=function(){var a,b,c,d;for(d=this.children,b=0,c=d.length;c>b;b++)a=d[b],a.isHidden=!1;return this.updateChildren(),this.requestUpdate()},a.prototype.hideChildren=function(){var a,b,c,d,e,f,g,h;for(c=function(a){return function(){return 0===a.visibleChildren().length}}(this),d=function(a){return function(){return a.requestUpdate()}}(this),b=this.groupActionCallback(d,c),this.isRoot&&(b=this.groupActionCallback(this.updatePosition,c)),g=this.visibleChildren(),h=[],e=0,f=g.length;f>e;e++)a=g[e],h.push(a.hide(b));return h},a.prototype.hide=function(a){var b,c,d,e,f,g,h,i;for(0===this.visibleChildren().length&&(this.isHidden=!0,a(this)),d=function(b){return function(){return b.isHidden=!0,a(b)}}(this),e=function(a){return function(){return 0===a.visibleChildren().length}}(this),b=this.groupActionCallback(d,e),h=this.visibleChildren(),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.hide(b));return i},a.prototype.groupActionCallback=function(a,b){return function(c){return b(c)&&null!=a?a():void 0}},a.prototype.visibleChildren=function(){return this.children.filter(function(a){return!a.isHidden})},a.prototype.animateVisible=function(b){var c;return null==b&&(b=null),c=this.isHidden?"0 1":"1 1",a.animator.animation(this.el,"transform","scale("+this.scale+")","scale("+c+")",this.animateDuration,b)(),this.scale=c},a.prototype.makeContentGroup=function(){var a;return this.contentX=this.contentDX,a={transform:"translate("+this.contentX+", 0)"},this.contentGroup=this.svgElement("g",a),this.el.appendChild(this.contentGroup)},a.prototype.toggleChildrenVisible=function(){return this.visibleChildren().length!==this.children.length?this.showChildren():this.hideChildren()},a}(),i.DOGWOOD.SVGTreeNode=f,d=function(a){function b(a){this.remove=l(this.remove,this),this.animateStar=l(this.animateStar,this),this.makeStar=l(this.makeStar,this),this.getStarLinePoints=l(this.getStarLinePoints,this),this.getStarTop=l(this.getStarTop,this),this.totalHeight=l(this.totalHeight,this),this.move=l(this.move,this);var c,d,e;c=null!=a.parent?a.parent:a,this.starLength=null!=(d=c.starLength)?d:15,this.starRadius=null!=(e=c.starRadius)?e:5,b.__super__.constructor.call(this,a),this.makeStar()}return n(b,a),b.prototype.move=function(){return this.animateStar(),b.__super__.move.call(this)},b.prototype.totalHeight=function(){var a;return this.isHidden?0:(a=b.__super__.totalHeight.call(this),0===this.visibleChildren().length&&(a+=this.starLength),a)},b.prototype.getStarTop=function(){return this.y+this.flagpoleLength()+this.marginTop+this.contentHeight()+this.marginBottom},b.prototype.getStarLinePoints=function(){var a;return a=this.getStarTop(),""+this.indent+", "+a+", "+this.indent+", "+(a+this.starLength)},b.prototype.makeStar=function(){var a,b,c;return null==this.starTop&&(this.starTop=this.getStarTop()),this.star=this.svgElement("g",{transform:"translate("+this.indent+", "+(this.starTop+this.starLength)+")"}),a={cx:0,cy:0,r:this.starRadius,fill:this.emptyColor,"stroke-width":this.lineWidth,stroke:this.treeColor},this.star.appendChild(this.svgElement("circle",a)),b={x1:this.starRadius-2,y1:0,x2:-this.starRadius+2,y2:0,fill:"none","stroke-width":""+this.lineWidth+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",b)),c={x1:0,y1:this.starRadius-2,x2:0,y2:-this.starRadius+2,fill:"none","stroke-width":""+this.lineWidth+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",c)),this.star.addEventListener("click",this.createChild),this.el.appendChild(this.star)},b.prototype.animateStar=function(a){var b;if(null==a&&(a=null),null==this.star){if(this.isHidden)return void(this.starTop=this.getStarTop());this.makeStar()}return b=this.getStarTop(),f.animator.animation(this.star,"transform","translate("+this.indent+" "+(this.starTop+this.starLength)+")","translate("+this.indent+" "+(b+this.starLength)+")",this.animateDuration,null)(),this.starTop=b},b.prototype.remove=function(){var a;return a=function(a){return function(){return null!=a.parent&&(a.parent.children=a.parent.children.filter(function(b){return b!==a}),0===a.parent.children.length&&null!=a.parent.circle&&(a.parent.circle.parentElement.removeChild(a.parent.circle),a.parent.circle=null)),a.requestUpdate(),a.el.parentElement.removeChild(a.el)}}(this),this.hide(a)},b}(f),i.DOGWOOD.EditableTree=d,c=function(a){function b(){return this.makeDiv=l(this.makeDiv,this),this.makeContent=l(this.makeContent,this),this.createChild=l(this.createChild,this),b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.createChild=function(){var a;return a={},this.visibleChildren().length!==this.children.length&&(a.isHidden=!0),this.newChild(a),this.showChildren()},b.prototype.makeContent=function(){var a;return this.content=this.svgElement("foreignObject"),this.contentGroup.appendChild(this.content),a=this.makeDiv(),this.content.appendChild(a),this.content.setAttribute("width",a.offsetWidth),this.content.setAttribute("height",a.offsetHeight),this.content.setAttribute("y",this.contentY),this.content.addEventListener("click",this.toggleChildrenVisible)},b.prototype.makeDiv=function(){var a,b;return a=this.htmlElement("div"),b="background: red; height: 180px; width: 800px;",a.setAttribute("style",b),a.innerHTML=this.name,a},b}(f),i.DOGWOOD.BasicTree=c,b=function(a){function b(a){this.makeDiv=l(this.makeDiv,this),this.makeContent=l(this.makeContent,this),this.createChild=l(this.createChild,this);var c,d;c=null!=(d=a.parent)?d:a,null==c.circleRadius&&(c.circleRadius=10),null==c.starRadius&&(c.starRadius=10),null==c.starLength&&(c.starLength=26),b.__super__.constructor.call(this,a)}return n(b,a),b.prototype.createChild=function(){var a;return a={},this.visibleChildren().length!==this.children.length&&(a.isHidden=!0),this.newChild(a),this.showChildren()},b.prototype.makeContent=function(){var a;return this.content=this.svgElement("foreignObject"),this.contentGroup.appendChild(this.content),a=this.makeDiv(),this.content.appendChild(a),this.content.setAttribute("width",a.offsetWidth),this.content.setAttribute("height",a.offsetHeight),this.content.setAttribute("y",this.contentY)},b.prototype.makeDiv=function(){var a,b;return a=this.htmlElement("div"),b="background: red; height: 40px; width: 60px;",a.setAttribute("style",b),a.innerHTML=this.name,a},b}(d),i.DOGWOOD.BasicEditableTree=b,g=function(a){function b(){return this.setInputActive=l(this.setInputActive,this),this.setTextToDiv=l(this.setTextToDiv,this),this.changeFocus=l(this.changeFocus,this),this.requestFocusChange=l(this.requestFocusChange,this),this.makeDiv=l(this.makeDiv,this),b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.makeDiv=function(){return this.contentDiv=this.htmlElement("div",{style:"width: 200px; height: 30px;"}),this.form=this.htmlElement("form"),this.input=this.htmlElement("input",{type:"text",value:this.name,size:10}),this.button=this.htmlElement("input",{type:"button",value:"delete"}),this.form.appendChild(this.input),this.form.appendChild(this.button),this.button.addEventListener("click",this.remove),this.contentDiv.innerHTML=this.input.value,this.contentDiv.addEventListener("click",this.setInputActive),this.inputActive=!1,this.contentDiv},b.prototype.requestFocusChange=function(a){return null==this.parent?this.changeFocus(a):this.parent.requestFocusChange(a)},b.prototype.changeFocus=function(a){var b,c,d,e,f;for(this!==a&&this.setTextToDiv(),e=this.children,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.changeFocus(a));return f},b.prototype.setTextToDiv=function(){return this.name=this.input.value,this.contentDiv.innerHTML=this.input.value,this.inputActive=!1},b.prototype.setInputActive=function(){return this.inputActive||(this.contentDiv.innerHTML="",this.contentDiv.appendChild(this.form),this.inputActive=!0,this.requestFocusChange(this),this.input.focus()),!0},b}(b),i.DOGWOOD.TODOListTree=g,e=function(a){function b(a){this.makeContent=l(this.makeContent,this),this.animateVisible=l(this.animateVisible,this);var c,d,e;this.link=a.link,this["class"]=a["class"],this.id=a.id,this.tag=a.tag,this.width=null!=(d=a.width)?d:200,this.height=null!=(e=a.height)?e:20,null==this.tag&&(this.tag=null!=this.link?"a":"p"),b.__super__.constructor.call(this,a),null==this.parent&&(c=this.totalHeight()+this.contentHeight()+this.outerFramePaddingBottom,this.el.setAttribute("height",""+c+"px"),this.div.setAttribute("height",""+c+"px"))}return n(b,a),b.prototype.animateVisible=function(a){var c;return null==a&&(a=null),this.isHidden?(c=function(b){return function(){return b.content.innerHTML="",null!=a?a():void 0}}(this),b.__super__.animateVisible.call(this,c)):(this.content.appendChild(this.contentDiv),b.__super__.animateVisible.call(this,a))},b.prototype.makeContent=function(){var a;return a={},null!=this.link&&(a={href:this.link}),null!=this["class"]&&(a["class"]=this["class"]),null!=this.id&&(a.id=id),this.a=this.htmlElement(this.tag,a),this.a.innerHTML=this.name,this.contentDiv=this.htmlElement("div",{"class":this["class"]}),this.contentDiv.appendChild(this.a),this.content=this.svgElement("foreignObject"),this.contentGroup.appendChild(this.content),this.isHidden||this.content.appendChild(this.contentDiv),this.contentDiv.style.height=this.height,this.contentDiv.style.width=this.width,this.content.setAttribute("width",this.width),this.content.setAttribute("height",this.height),this.content.setAttribute("y",this.contentY),null==this.link?this.contentDiv.addEventListener("click",this.toggleChildrenVisible):void 0},b}(f),i.DOGWOOD.MenuTree=e}).call(this),this.JST=this.JST||{},this.JST.Euler=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j="function",k=this.escapeExpression,l=c.helperMissing;return i+='<div class="Euler">\n    <span class="name">',(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===j?g.call(b,{hash:{},data:e}):g),i+=k(f)+'</span>\n    <div class="Euler-element">\n        <span class="Euler-label">'+k((f=b&&b._order,f=null==f||f===!1?f:f[0],typeof f===j?f.apply(b):f))+':</span>\n        <span class="Euler-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b._x,h):l.call(b,"sig",4,b&&b._x,h)))+'</span>\n    </div>\n    <div class="Euler-element">\n        <span class="Euler-label">'+k((f=b&&b._order,f=null==f||f===!1?f:f[1],typeof f===j?f.apply(b):f))+':</span>\n        <span class="Euler-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b._z,h):l.call(b,"sig",4,b&&b._z,h)))+'</span>\n    </div>\n    <div class="Euler-element">\n        <span class="Euler-label">'+k((f=b&&b._order,f=null==f||f===!1?f:f[2],typeof f===j?f.apply(b):f))+':</span>\n        <span class="Euler-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b._z,h):l.call(b,"sig",4,b&&b._z,h)))+"</span>\n    </div>\n</div>\n\n"}),this.JST.Matrix4=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n        <tr>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[0],e):j.call(a,"sig",4,a&&a[0],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[4],e):j.call(a,"sig",4,a&&a[4],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[8],e):j.call(a,"sig",4,a&&a[8],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[12],e):j.call(a,"sig",4,a&&a[12],e)))+"</td>\n        </tr>\n        <tr>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[1],e):j.call(a,"sig",4,a&&a[1],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[5],e):j.call(a,"sig",4,a&&a[5],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[9],e):j.call(a,"sig",4,a&&a[9],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[13],e):j.call(a,"sig",4,a&&a[13],e)))+"</td>\n        </tr>\n        <tr>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[2],e):j.call(a,"sig",4,a&&a[2],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[6],e):j.call(a,"sig",4,a&&a[6],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[10],e):j.call(a,"sig",4,a&&a[10],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[14],e):j.call(a,"sig",4,a&&a[14],e)))+"</td>\n        </tr>\n        <tr>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[3],e):j.call(a,"sig",4,a&&a[3],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[7],e):j.call(a,"sig",4,a&&a[7],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[11],e):j.call(a,"sig",4,a&&a[11],e)))+"</td>\n            <td>"+k((d=c.sig||a&&a.sig,e={hash:{},data:b},d?d.call(a,4,a&&a[15],e):j.call(a,"sig",4,a&&a[15],e)))+"</td>\n        </tr>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j=c.helperMissing,k=this.escapeExpression,l="function",m=this;return i+='<div class="Matrix4">\n    <span class="name">',(h=c.name)?g=h.call(b,{hash:{},data:e}):(h=b&&b.name,g=typeof h===l?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</span>\n    <table class="matrix">\n        ',g=c["with"].call(b,b&&b.elements,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+="\n    </table>\n</div>\n"}),this.JST.Object3D=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <span class="name">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</span>\n            "}function g(){return'\n            <span class="name">Object3D</span>\n            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="Object3D-grid">\n    <div class="left">\n        <div class="title">\n            ',h=c["if"].call(b,b&&b.name,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+="\n            ",h=c.unless.call(b,b&&b.name,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(h||0===h)&&(j+=h),j+='\n            <br /><span class="parent">Parent: ',(i=c.parent)?h=i.call(b,{hash:{},data:e}):(i=b&&b.parent,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'</span>\n        </div>\n        <div class="vectors">\n            <div class="grid-box-Vector3">\n                ',(i=c.position)?h=i.call(b,{hash:{},data:e}):(i=b&&b.position,h=typeof i===k?i.call(b,{hash:{},data:e}):i),(h||0===h)&&(j+=h),j+='\n            </div>\n            <div class="grid-box-Euler">\n                ',(i=c.rotation)?h=i.call(b,{hash:{},data:e}):(i=b&&b.rotation,h=typeof i===k?i.call(b,{hash:{},data:e}):i),(h||0===h)&&(j+=h),j+='\n            </div>\n        </div>\n    </div>\n    <div class="grid-box-Matrix4">\n        ',(i=c.matrix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.matrix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),(h||0===h)&&(j+=h),j+='\n    </div>\n    <div class="grid-box-Matrix4">\n        ',(i=c.matrixWorld)?h=i.call(b,{hash:{},data:e}):(i=b&&b.matrixWorld,h=typeof i===k?i.call(b,{hash:{},data:e}):i),(h||0===h)&&(j+=h),j+="\n    </div>\n</div>\n"}),this.JST.Vector3=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j="function",k=this.escapeExpression,l=c.helperMissing;return i+='<div class="Vector3">\n    <span class="name">',(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===j?g.call(b,{hash:{},data:e}):g),i+=k(f)+'</span>\n    <div class="Vector3-element">\n        <span class="Vector3-label">X:</span>\n        <span class="Vector3-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b.x,h):l.call(b,"sig",4,b&&b.x,h)))+'</span>\n    </div>\n    <div class="Vector3-element">\n        <span class="Vector3-label">Y:</span>\n        <span class="Vector3-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b.y,h):l.call(b,"sig",4,b&&b.y,h)))+'</span>\n    </div>\n    <div class="Vector3-element">\n        <span class="Vector3-label">Z:</span>\n        <span class="Vector3-data">'+k((g=c.sig||b&&b.sig,h={hash:{},data:e},g?g.call(b,4,b&&b.z,h):l.call(b,"sig",4,b&&b.z,h)))+"</span>\n    </div>\n</div>\n"}),function(){var a,b,c,d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=null!=h?h:this,k=function(a,b){return h[a]=b,window[a]=b},j={},k("lasertutor",j),g=function(){function a(){}return a.prototype.normalizeMouseTravel=function(a,b,c,d){var e,f;return e=d.x-c.x,f=c.y-d.y,{x:e/a,y:f/b}},a.prototype.calculateRotationVector=function(a,b,c,d){var e;return null==c&&(c=2*Math.PI),null==d&&(d=1),b*=d,e=0===b?c:c/b,{yaw:a.x*e,pitch:a.y*e}},a.prototype.clampAngle0_2PI=function(a){return a%=2*Math.PI,a>0?a:2*Math.PI+a},a.prototype.mouseXYToCameraRotation=function(a,b,c,d){var e,f,g,h,i,j,k;return g=Math.sqrt(a*a+b*b),j=g*d,h=b/g,i=Math.sin(j),f=Math.cos(j),k=1-f,e={z:-a/g,x:Math.cos(c)*h,y:-Math.sin(c)*h},new THREE.Matrix4(e.x*e.x*k+f,e.x*e.y*k-e.z*i,e.x*e.z*k+i*e.y,0,e.y*e.x*k+e.z*i,e.y*e.y*k+f,e.y*e.z*k-e.x*i,0,e.z*e.x*k-e.y*i,e.y*e.z*k+e.x*i,e.z*e.z*k+f,0,0,0,0,1)},a.prototype.pitchRotationAxis=function(a){return new THREE.Vector3(Math.cos(a),-Math.sin(a),0)},a}(),j.ThreeDNavController=g,c=function(){function a(a){this.element=a,this.getMouseXY=l(this.getMouseXY,this),this.getTouchXY=l(this.getTouchXY,this),this.touchEnd=l(this.touchEnd,this),this.touchStart=l(this.touchStart,this),this.mouseUp=l(this.mouseUp,this),this.mouseDown=l(this.mouseDown,this),this.startPoint={x:50,y:50},this.interacting=!1,this.element.addEventListener("mousedown",this.mouseDown),window.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("mousemove",this.mouseMove),this.element.addEventListener("wheel",this.mouseWheel),this.element.addEventListener("touchstart",this.touchStart),window.addEventListener("touchend",this.touchEnd),this.element.addEventListener("touchmove",this.touchMove)}return a.prototype.mouseDown=function(a){return this.interacting=!0,this.startPoint=this.getMouseXY(a)},a.prototype.mouseWheel=function(){},a.prototype.mouseUp=function(){return this.interacting=!1},a.prototype.touchStart=function(a){return this.interacting=!0,this.startPoint=this.getTouchXY(a)},a.prototype.touchEnd=function(){return this.interacting=!1},a.prototype.getTouchXY=function(a){var b;return b=this.element.getBoundingClientRect(),{x:a.targetTouches[0].clientX-b.left,y:a.targetTouches[0].clientY-b.top}},a.prototype.getMouseXY=function(a){var b;return b=this.element.getBoundingClientRect(),{x:a.clientX-b.left,y:a.clientY-b.top}},a}(),j.NavigationUI=c,b=function(a){function b(){this.mouseWheel=l(this.mouseWheel,this),this.revolveCamera=l(this.revolveCamera,this),this.mouseMove=l(this.mouseMove,this),this.touchStart=l(this.touchStart,this),this.mouseDown=l(this.mouseDown,this),this.ZOOMFACTOR=-.3,this.MIN_ZOOM=.01,this.RADIANS_PER_FRAME_UNIT=Math.PI,this.yaw=0,this.pitch=0,this.scene=new f,b.__super__.constructor.call(this,this.scene.element),this.startCameraMatrix=this.scene.camera.matrix.clone(),this.interactionRegime=this.revolveCamera,this.controller=new lasertutor.ThreeDNavController}return n(b,a),b.prototype.mouseDown=function(a){return b.__super__.mouseDown.call(this,a),this.startFocalRotation=this.scene.focalPoint.rotation.clone(),this.interactionRegime=function(){switch(a.button){case 0:return function(a){return this.revolveCamera(this.getMouseXY(a))};case 4:return function(a){return this.translateFocalPoint(this.getMouseXY(a))}}}()},b.prototype.touchStart=function(a){return b.__super__.touchStart.call(this,a),this.startFocalRotation=this.scene.focalPoint.rotation.clone(),this.interactionRegime=function(){switch(a.targetTouches.length){case 1:return function(a){return this.revolveCamera(this.getTouchXY(a))};case 2:return this.zoom;case 3:return function(a){return this.translateFocalPoint(this.getTouchXY(a))}}}.call(this)},b.prototype.mouseMove=function(a){return this.interacting?this.interactionRegime(a):void 0},b.prototype.revolveCamera=function(a){var b,c,d,e,f;return d=this.pitch,e=this.yaw,b=this.controller.normalizeMouseTravel(this.scene.element.offsetWidth,this.scene.element.offsetHeight,this.startPoint,a),c=this.controller.pitchRotationAxis(this.yaw),this.yaw=this.controller.clampAngle0_2PI(this.yaw+this.RADIANS_PER_FRAME_UNIT*b.x),this.pitch+=this.RADIANS_PER_FRAME_UNIT*b.y,this.pitch=this.pitch>Math.PI?Math.PI:this.pitch,this.pitch=this.pitch<0?0:this.pitch,this.scene.focalPoint.rotation.x+=c.x*(this.pitch-d),this.scene.focalPoint.rotation.y+=c.y*(this.pitch-d),this.scene.focalPoint.rotation.z-=this.yaw-e,f=this.controller.mouseXYToCameraRotation(b.x,b.y,this.yaw,this.RADIANS_PER_FRAME_UNIT),this.startPoint=a,this.scene.updateViews()
},b.prototype.mouseWheel=function(a){var b;return a.preventDefault(),b=this.scene.camera.position.z+this.ZOOMFACTOR*-a.deltaY,this.scene.camera.position.z=b>=this.MIN_ZOOM?b:this.MIN_ZOOM},b.prototype.add=function(a){return this.scene.add(a)},b}(c),j.NavigableScene=b,e=function(a){function b(a){this.reRender=l(this.reRender,this),this.makeDiv=l(this.makeDiv,this),this.object3D=a.object3D,this.view=new d({model:this.object3D,name:a.text,parent:null==a.parent?"world":a.parent.text}),b.__super__.constructor.call(this,a),console.log(this.toString()),this.move()}return n(b,a),b.prototype.makeDiv=function(){return this.contentDiv=this.htmlElement("div",{style:"width: 800px; height: 180px;"}),this.view.render(),this.contentDiv.appendChild(this.view.el),this.view.el.setAttribute("style","width: 800px; height: 180px;"),this.view.el},b.prototype.reRender=function(){var a,b,c,d,e;for(this.view.render(),d=this.visibleChildren(),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.reRender());return e},b}(ambigui.DOGWOOD.BasicTree),j.ObjectViewTree=e,f=function(){function a(a,b){var c,d;null==a&&(a="Three"),null==b&&(b="Tree"),this.updateViews=l(this.updateViews,this),this.add=l(this.add,this),this.renderTHREE=l(this.renderTHREE,this),this.element=document.getElementById(a),this.scene=new THREE.Scene,this.treeUI=new e({object3D:this.scene,text:"scene",el:document.getElementById(b,{marginTop:25,marginBottom:10})}),c=new THREE.CylinderGeometry(.4,.4,.2,16),d=new THREE.MeshBasicMaterial({color:16776960}),this.focalPoint=new THREE.Mesh(c,d),this.scene.add(this.focalPoint),this.camera=new THREE.PerspectiveCamera(75,1,.1,1e3),this.camera.position.z=5,this.focalPoint.add(this.camera),this.treeUI.newChild({text:"camera",object3D:this.camera,isHidden:!0}),this.treeUI.newChild({text:"focalPoint",object3D:this.focalPoint,isHidden:!0}),this.renderer=new THREE.WebGLRenderer,this.element.appendChild(this.renderer.domElement),this.renderer.setSize(500,500),this.renderTHREE(),this.updateViews()}return a.prototype.renderTHREE=function(){return requestAnimationFrame(this.renderTHREE),this.renderer.render(this.scene,this.camera)},a.prototype.add=function(a,b,c){return null==b&&(b="noName"),null==c&&(c=null),this.scene.add(a),this.treeUI.newChild({text:b,object3D:a,isHidden:!0})},a.prototype.updateViews=function(){return this.treeUI.reRender()},a}(),j.SceneManager=f,a=function(){function a(){var a,b,c,d,e,f;b=new THREE.LineBasicMaterial({color:255}),a=new THREE.Geometry,a.vertices.push(new THREE.Vector3(-100,0,0)),a.vertices.push(new THREE.Vector3(100,0,0)),this.x_axis=new THREE.Line(a,b),d=new THREE.LineBasicMaterial({color:65280}),c=new THREE.Geometry,c.vertices.push(new THREE.Vector3(0,-100,0)),c.vertices.push(new THREE.Vector3(0,100,0)),this.y_axis=new THREE.Line(c,d),f=new THREE.LineBasicMaterial({color:16711680}),e=new THREE.Geometry,e.vertices.push(new THREE.Vector3(0,0,-100)),e.vertices.push(new THREE.Vector3(0,0,100)),this.z_axis=new THREE.Line(e,f)}return a.prototype.addTo=function(a){var b,c,d;for(a.add(this.x_axis),b=c=-100;100>=c;b=c+=10)a.add(this.xLine(b));for(a.add(this.y_axis),b=d=-100;100>=d;b=d+=10)a.add(this.yLine(b));return a.add(this.z_axis)},a.prototype.xLine=function(a){var b,c;return c=new THREE.LineBasicMaterial({color:255}),b=new THREE.Geometry,b.vertices.push(new THREE.Vector3(-100,a,0)),b.vertices.push(new THREE.Vector3(100,a,0)),new THREE.Line(b,c)},a.prototype.yLine=function(a){var b,c;return c=new THREE.LineBasicMaterial({color:65280}),b=new THREE.Geometry,b.vertices.push(new THREE.Vector3(a,-100,0)),b.vertices.push(new THREE.Vector3(a,100,0)),new THREE.Line(b,c)},a}(),j.Axes=a,d=function(a){function b(a){this.render=l(this.render,this),b.__super__.constructor.call(this,a),this.name=a.name,this.parent=a.parent,this.template=JST.Object3D,this.model.position.name="Position",this.model.rotation.name="Rotation",this.model.matrix.name=".matrix",this.model.matrixWorld.name=".matrixWorld"}return n(b,a),b.prototype.render=function(){return this.el.innerHTML=this.template({name:this.name,parent:this.parent,matrix:JST.Matrix4(this.model.matrix),matrixWorld:JST.Matrix4(this.model.matrixWorld),position:JST.Vector3(this.model.position),rotation:JST.Euler(this.model.rotation)})},b}(Backbone.View),j.Object3DView=d,i=function(a,b){return b.toFixed(a)},Handlebars.registerHelper("sig",i)}.call(this);